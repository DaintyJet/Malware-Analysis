# Attack a vulnerable program using strcpy() and large enough buffer with C from command line
The victim program is same as the one in the [Python version attack](../). Instead of using the Python code for the attack, we write a C program for the attack.

## Attack Steps
### Step 1. Assemble and link calc-shell.asm to get the shellcode
1. Use [arwin](https://github.com/xinwenfu/arwin) to get the address of *WinExec*
   - ``` arwin kernel32.dll WinExec ```
3. Change calc-shell.asm in terms of the address of WinExec
4. Assemble and link calc-shell.asm
5. Use Immunity Debugger's binary copy to get the shellcode

### Step 2. Craft the malicious string
1. Compile victim3.c
2. Load victim3.exe into IDA Freeware and find the address of the main function and its stack layout so as to derive the length of the malicious string
3. Use Immunity Debugger to find the address of the local buffer and thus the address of the shellcode
4. Craft the malicious string with the shellcode and its address

### Step 3. Attack
1. Run xploitViaCmdline.exe at command promput (cmd.exe), which stores the malcioius string in an environment variable called *fxw*
2. victim3 %fxw%
